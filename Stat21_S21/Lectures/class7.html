<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Class 7</title>
    <meta charset="utf-8" />
    <meta name="author" content="Suzanne Thornton" />
    <link href="class7_files/remark-css/default.css" rel="stylesheet" />
    <link href="class7_files/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Class 7
## Statistical Methods II (Stat 021)
### Suzanne Thornton
### Swarthmore College
### For class on Thursday, March 4, 2021 (updated: 2021-03-04)

---




&lt;style type="text/css"&gt;
pre {
  background: #FFBB33;
  max-width: 100%;
  overflow-x: scroll;
}

.scroll-output {
  height: 60%;
  overflow-y: scroll;
}

.scroll-small {
  height: 30%;
  overflow-y: scroll;
}
   
.red{color: #ce151e;}
.green{color: #26b421;}
.blue{color: #426EF0;}
&lt;/style&gt;


# Agenda

Here's the agenda for today's class: 

- Group check-ins (5 mins)

- Variable types and properties of expectation and variance (20 mins)

- Group exercise on probability models (25 mins)

- Categorical variables in R (5 mins)

- Housekeeping items and announcements (5 mins)

---
# Tuesday check-in 

- Send me a screenshot of your check-in markers on Slack

- [Fill out the group roles for today's class](https://docs.google.com/spreadsheets/d/1d34JxqXQON6MyIEjN5ugkByCeTuGTTb_ovvPfSAca_g/edit?usp=sharing) 

&lt;img src="Figs/feelings_wheel.jpg" height="500" style="display: block; margin: auto;" /&gt;

---
## Comprehension Quiz 
### Week 4 

&lt;img src="Figs/week4_prob9.png" height="400" style="display: block; margin: auto;" /&gt;


---
## Variable types 

- Categorical 
    
  * Nominal - the levels of the categorical variable are arbitrary names or labels (e.g. color, state)
    
  * Ordinal - the levels of the categorical variable have an ordered meaning (e.g. low/medium/high, morning/afternoon/evening/night)
  
- Quantitative/numerical 
  
  * Discrete - there are a limited or countable number of different values (e.g. number of passengers in a car, the positive integers)
    
  * Continuous - there are an infinite number of possible values (e.g. the interval between zero and one)


---
## Random variables

In order to specify a probability model for any RV, `\(X\)`, (quantitative or categorical) we must list all of the *possible values* `\(X\)` can take together with all of the corresponding *probabilities* that `\(X\)` takes on these values. 


The expected value (or the average) of a random variable is the sum of the possibilities times their corresponding probabilities:

`$$E[X] = \sum (\text{possibilities} \times \text{probabilities}).$$`

The variance of a random variable, on the other hand, is the sum of the squared difference between each possible value and the expected value of the RV times the corresponding probabilities:

`$$Var[X] = \sum [(\text{possibilities} - E[X])^2 \times \text{probabilities}].$$`


---
## Variance and Standard Deviation 

  - Standard deviation is a *standard* unit of measurement for Statisticians. Always specify, the standard deviation *of what?* The units of standard deviation match those of the original data.

  - Variance is just a function of standard deviation.


Suppose we observe `\(n\)` data points and, for each data point, we collect two measurements, one for variable `\(X\)` (e.g. age) and another for variable `\(Y\)` (e.g height). 

&lt;ol start="1"&gt;

&lt;li&gt; Expectation&lt;/li&gt;&lt;/ol&gt;

`$$E[X] \approx \frac{1}{n}\sum_{i=1}^{n} x_{i}$$`

---
## Variance and standard deviation 

  - Standard deviation is a *standard* unit of measurement for Statisticians. Always specify, the standard deviation *of what?* The units of standard deviation match those of the original data.

  - Variance is just a function of standard deviation.  

Suppose we observe `\(n\)` data points and, for each data point, we collect two measurements, one for variable `\(X\)` (e.g. age) and another for variable `\(Y\)` (e.g height). 

&lt;ol start="2"&gt;

&lt;li&gt;Variance/Standard Deviation&lt;/li&gt;&lt;/ol&gt;
`$$Var[X] = Cov[X, X] = E[(X-E[X])^2] = \dots = (E[X])^2 - E[X^2]$$` 
`$$\approx \frac{1}{n-1}\sum_{i=1}^{n}\left(x_{i}-\frac{1}{n}\sum_{i=1}^{n}x_{i}\right)^2$$`
`$$SD[X] = \sqrt{Var[X]}$$`


---
## Variance and standard deviation 

  - Standard deviation is a *standard* unit of measurement for Statisticians. Always specify, the standard deviation *of what?* The units of standard deviation match those of the original data.

  - Variance is just a function of standard deviation.  

Suppose we observe `\(n\)` data points and, for each data point, we collect two measurements, one for variable `\(X\)` (e.g. age) and another for variable `\(Y\)` (e.g height). 


&lt;ol start="3"&gt;

&lt;li&gt;Covariance&lt;/li&gt;&lt;/ol&gt;
`$$Cov[X, Y] = E[(X-E[X])(Y-E[Y])] = \dots = E[XY] - E[X]E[Y]$$` 
`$$\approx   \frac{1}{n-1}\sum_{i=1}^{n}\left(x_{i}-\frac{1}{n}\sum_{i=1}^{n}x_{i}\right)\left(y_{i}-\frac{1}{n}\sum_{i=1}^{n}y_{i}\right)$$`


---
### Correlation

Correlation is a standardized version of covariance: 

`$$\rho(X,Y) = Cor(X,Y) = \frac{Cov[X,Y]}{\sqrt{Var[X]Var[Y]}}.$$`

### Independence 

If two RVs are independent, then they are uncorrelated. NOT vice versa! That is, if `\(X\)` is independent of `\(Y\)` then `\(E[XY] = E[X]E[Y]\)` and thus `\(Cov[X, Y] = 0\)` and subsequently `\(Cor[X,Y] = 0\)`. 

Also, if `\(X\)` is independent of `\(Y\)` then `\(Var[X \pm Y] = Var[X] + Var[Y]\)`. Note that standard deviations do not share this same property! 


---
## Properties of Expectation and Variance 

Suppose we have two random variables, `\(X\)` and `\(Y\)`. Regardless of the distribution of either random variable, we find the sample estimates for the mean, variance, and covariance with the following formulas. 

- `\(E[X]=\)` sum of the possibilities `\(\times\)` the probabilities 
- `\(Var[X]=\)` average distance from each data point to the mean
- `\(Cov[X,Y]=\)` strength of a linear relationship between `\(X\)` and `\(Y\)` 

**Properties of expectation:** `\(E[aX \pm bY] = aE[X] \pm bE[Y]\)` 

**Properties of variance:** `\(Var[aX \pm bY] = a^2Var[X] + b^2Var[Y] \pm 2Cov[X,Y]\)` 

.blue[But], if `\(X\)` and `\(Y\)` are independent, then `\(Cov[X,Y]=0\)`! 


--
.center[**Variance always adds!**]


--
**Q:** From the information above, what is the formula for `\(SD(aX \pm bY)\)`? 

---
## Group work

The next three slides contain questions for you and your group to work through. These questions are taken from Homework 3 problems 2 and 3. 

Plan to spend about 10 minutes on the first part, 5 minutes on the second, and 10 minutes on the last part. You may want to open up the slides for Week 4 - part 1 to refresh your memory on the properties of probabilities. 



**Group roles:**
  
- Recorder - Keep track of your group's answers to the questions posed on the next three slides. I recommend sharing your screen with these slides and using the annotate feature in Zoom to write your answers directly on the slides. When there is 1 min remaining, share your answers with me via a DM on Slack. 

- Reporter - Keep track of your group's progress on the Google spreadsheet and keep an eye on the time to make sure your group is moving along. If you are getting stuck, request help on the spreadsheet and I will stop by. Be prepared to discuss your group's answers or any additional questions with me when I stop by.  

- Questioner - Make sure that there's no one person who is answering all the questions and doing all the work. Make sure that every step of your solutions are explained.  



---
## Homework 3 Problem 2 - Part 1
### Group work 

You play this phone game that consists of two consecutive games against the computer as the opponent. The probability you win the first part of the game is `\(0.4\)`. If you win the first part, the probability you also win the second is `\(0.2\)`. If you lose the first part, the probability you win the second is `\(0.3\)`. 

Let `\(A = \text{the event that you win the first part}\)` and `\(B = \text{the event that you win the second part}\)`.

(a) With your group draw a tree diagram representing the different possible outcomes of this game and their corresponding probabilities.  

(b) Are the two parts of this game independent? Explain your answer. 



**Hint:** Recall that the following are all equivalent statements 

1. Random events `\(A\)` and `\(B\)` are independent;

2. `\(P(A \text{ and } B) = P(A)P(B)\)`; 

3. `\(P(B \text{ given } A) = P(B)\)`.


---
## Homework 3 Problem 2 - Part 2
### Group work 

Use your tree diagram together with the properties of probability and conditional probability to find

1. The probability that you lose both parts and 

2. The probability that you win both parts. 


---
## Homework 3 Problem 3 
### Group work


Refer to the problem setting for Problem 2. We are going to use the information you found in Problem 2 to build a probability *model* for `\(X\)`, a random variable representing the number of parts of this game that you win. 


(a) Fill in the following table to fully specify a probability model for `\(X\)`. 

| `\(X\)` | `\(P(X=x)\)` |
|-----|----------|
| 0   |          |
| 1   |          |
| 2   |          |


(b) Based on your model in part (a), calculate the expected value, the variance, and the standard deviation of the random variable `\(X\)`.  




---
## Categorical variables in R
### Factors

In R, the default variable type is numerical. This means that when we want to define a categorical variable we need to double check that R is interpreting it correctly. R calls categorical variables **factors**. 

If you define a vector of categorical data, make sure you put all of the different levels inside quotation marks. This makes sure that R knows the elements are not numeric. You can then use the `factor()` function in R to create a categorical variable with different levels from this non-numeric vector. 

.scroll-small[

```r
color_vector &lt;- c("Red", "Green", "Red", "Yellow", "Green")
color_vector
```

```
## [1] "Red"    "Green"  "Red"    "Yellow" "Green"
```

```r
color_factor &lt;- factor(color_vector)
color_factor
```

```
## [1] Red    Green  Red    Yellow Green 
## Levels: Green Red Yellow
```
]

---
## Categorical variables in R
### Factors

.scroll-output[
**Troubleshooting tip:** Use the `class()` function to double check a variable type. 


```r
class(color_vector)
```

```
## [1] "character"
```

```r
class(color_factor) 
```

```
## [1] "factor"
```


The **levels** of the categorical variable are an inherited trait from the `factor()` function. This makes it easy to create a table of our factored variable to determine the total counts within each level. 


```r
table(color_factor) 
```

```
## color_factor
##  Green    Red Yellow 
##      2      2      1
```
]

---
## Categorical variables in R
### Factors

.scroll-output[
**Note:** Anything within quotation marks is read by R as a character, that is as as a non-numeric object. 


```r
num_vec &lt;- c(1,2,2,6,2,3,5)
class(num_vec)
```

```
## [1] "numeric"
```

```r
char_vec &lt;- c("1","2","2","6","2","3","5")
class(char_vec)
```

```
## [1] "character"
```

```r
cat_vec &lt;- factor(char_vec)
class(cat_vec)
```

```
## [1] "factor"
```

**Recall:** R is case-sensitive! So the values `"Red"` and `"red"` will be considered different levels in R.  
]



---
# R Lesson 
## Plotting in the `tidyverse`


.scroll-output[

### For categorical data, we visualize the data with a bar chart, rather than a histogram. 

Here we are going to treat the variable "number of passengers" as a categorical variable. 



```r
car_data &lt;- tibble(mph = c(22, 35, 20, 25, 24, 20, 34, 31, 30, 32, 33, 25, 29, 24),
                  passengers = c(1, 1, 3, 2, 5, 2, 1, 1, 2, 1, 3, 1, 1, 2)) 
ggplot(car_data, aes(x=factor(passengers))) +
         geom_bar() + 
         labs(title="Bar chart") + 
         xlab("Number of passengers") + 
         ylab("Count")
```

&lt;img src="Figs/class4plot4-1.png" style="display: block; margin: auto;" /&gt;
]



---
## Planning ahead for next week

- Watch the videos for Week 5 before Tuesday's class.  

- Finish and submit HW 3 before Monday, March 8 at 8am EST. 

- Visit me in Office Hours Monday evening to clarify any questions you may have! 

- Check in on the different Slack channels to see if there are any questions you can discuss with your classmates. 

- Start to study for Test 1 which will be released after class next Thursday and will be due by noon of the following Saturday.  


## Announcements 

- On Tuesday, Claude Steele gave a [virtual lecture](https://swarthmore.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=5370a1b3-2e1e-48dc-ae18-ace0001d9689&amp;start=0.768443) about stereotype threat in the sciences. I hate that I forgot to announce this but fortunately the talk was recorded! I highly recommend that you check it out when you have 45 mins or so to spare!  

- If you are interested in attending the Data for Justice Conference in April, please send me an email with the subject line "Data for Justice Stat 21".
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"navigation": {
"scroll": false
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
